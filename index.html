<!DOCTYPE html>
function add(valor) {
quantidades[valor]++;
document.getElementById(`qtd-${valor}`).innerText = quantidades[valor];
}


function trocarLoja() {
lojaAtual = lojaAtual === "GUARA_1" ? "GUARA_2" : "GUARA_1";
document.getElementById("btnLoja").innerText = lojaAtual.replace("_", " ");
}


function enviarVenda() {
let total = 0;
const itens = [];


for (let v in quantidades) {
if (quantidades[v] > 0) {
total += v * quantidades[v];
itens.push({ valor: v, qtd: quantidades[v] });
}
}


if (total === 0) {
alert("Nenhum item selecionado");
return;
}


db.collection("vendas").add({
loja: lojaAtual,
itens,
total,
data: new Date()
});


alert("Venda salva com sucesso!");
location.reload();
}


function gerarRelatorio() {
db.collection("vendas")
.where("loja", "==", lojaAtual)
.get()
.then(snapshot => {
let soma = 0;
snapshot.forEach(doc => soma += doc.data().total);
alert(`Total vendido em ${lojaAtual}: R$ ${soma}`);
});
}
</script>


</body>
</html>
